(function(){function n(){"object"===typeof window.zTrackerCallbacks&&(window.zTrackerCallbacks.forEach(function(a){if("function"==typeof a)try{a()}catch(c){}}),window.zTrackerCallbacks=[])}"undefined"===typeof window.zTracker&&(window.zTracker=function(a){function c(b,d){var k="",a=f()||{};a[l]={ct:b};g&&g.phone&&(a[l].phone=g.phone,a[l].cLength=g.cLength,a[l].mask=q);b=[];for(var h in a)if(a.hasOwnProperty(h)){var e=h+":";"object"==typeof a[h]?(e+=a[h].ct,a[h].phone&&(e+=":"+a[h].phone+":"+(a[h].cLength||
"")+":"+encodeURIComponent(a[h].mask||""))):e+=a[h];b.push(e)}d&&(a=new Date,a.setTime(a.getTime()+864E5*d),k+=";expires="+a);k+=";path=/";u&&(k+=";domain="+u);document.cookie="ztracker="+encodeURIComponent(b.join("|"))+k}function f(b){for(var d=(b||"ztracker")+"=",a=document.cookie.split(";"),c=0;c<a.length;c++){var h=a[c].trim();if(0===h.indexOf(d)){a=decodeURIComponent(h.substring(d.length,h.length));if(b)return a;var e={},f=0;if(0<a.indexOf(":"))a.split("|").map(function(b){b=b.split(":");e[b[0]]=
{ct:b[1],phone:b[2],cLength:b[3],mask:decodeURIComponent(b[4]||"")};f++}),e[0]&&1==f&&0!=l&&(e[l]={ct:e[0]},delete e[0]);else{if("undefined"==typeof window.ctTrackerDefCKey)window.ctTrackerDefCKey=l;else if(window.ctTrackerDefCKey!=l)break;e[l]={ct:a}}return e}}return null}function y(b){if(!b||0>b.indexOf("."))return!1;var a=location.hostname.indexOf(b);return 0==a||0<a&&"."==location.hostname.substr(a-1,1)?(u=b,!0):!1}function p(b){if(z)return!1;g&&A(g.phone,g.cLength,!0);z=!0;if(!b.roistat)if(window.roistat&&
window.roistat.visit)b.roistat=window.roistat.visit;else{var d=window.roistatVisitCallback||!1;window.roistatVisitCallback=function(a){b.roistat=a;v&&E(b);d&&d(a)}}a.metrics?(a.metrics.metrika&&(m(function(){if(window["yaCounter"+a.metrics.metrika])return n(b),!0}),document.addEventListener("yacounter"+a.metrics.metrika+"inited",function(){n(b)})),a.metrics.ga&&m(function(){if("undefined"!=typeof ga)return F(b),!0}),(a.metrics.metrika||a.metrics.ga)&&setTimeout(function(){v||r(b)},3E3)):r(b)}function m(b,
a){if(!b())var d=0,c=(a||2E3)/50,h=setInterval(function(){(b()||++d>c)&&clearInterval(h)},50)}function n(b){if(!B){B=!0;var d="yaCounter"+a.metrics.metrika;window[d]&&window[d].hasOwnProperty("getClientID")&&(b.metrika={clid:window[d].getClientID(),tracker:a.metrics.metrika},a.metrics.ga&&!b.ga||r(b))}}function F(b){ga(function(){for(var d=ga.getAll(),k=0;k<d.length;k++)if(d[k].get("trackingId")==a.metrics.ga){b.ga={clid:d[k].get("clientId"),tracker:d[k].get("trackingId")};a.metrics.metrika&&!b.metrika||
r(b);break}})}function r(b){v=!0;g&&g.phone&&(b.phone=g.phone);C(w,b,function(a){if(a.isError)g&&!b.ping&&(G(),g=!1),(a.cookie||b.cookie)&&c(a.cookie||b.cookie,7);else{a.cookie&&(b.cookie=a.cookie);if(!g||g.phone!=a.phone||"mask"in a&&(a.mask||"")!=q)"mask"in a&&(q=a.mask),A(a.phone,a.countryLength),g={phone:a.phone,cLength:a.countryLength};b.cookie&&c(b.cookie,7);a.interval&&setTimeout(function(){b.active=t;b.ping=!0;r(b);t=!1},1E3*a.interval)}})}function E(a){if(a.cookie&&a.roistat){var b={};["cookie",
"id","roistat"].forEach(function(d){b[d]=a[d]});C(w+"?update",b)}}function A(a,d,k){if(a||k){for(var b=document.getElementsByClassName(x),c=0;c<b.length;c++){var e=b[c];e.hasAttribute("href")&&(k&&e.setAttribute("data-ct-origin-href",e.getAttribute("href")),e.setAttribute("href",(0<=e.getAttribute("href").indexOf("callto")?"callto:+":"tel:+")+a));k&&e.setAttribute("data-ct-origin-phone",e.innerHTML);e.innerHTML=zTracker.formatPhone(a,e.hasAttribute("data-mask")?e.getAttribute("data-mask"):q,parseInt(d))}a=
document.createEvent("Event");a.initEvent("zd:show",!0,!0);document.dispatchEvent(a)}}function G(){for(var a=document.getElementsByClassName(x),d=0;d<a.length;d++){var c=a[d];c.hasAttribute("data-ct-origin-href")&&c.setAttribute("href",c.getAttribute("data-ct-origin-href"));c.innerHTML=c.getAttribute("data-ct-origin-phone")}}function C(a,d,c){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState&&200==b.status&&c&&"function"==typeof c)try{var a=JSON.parse(b.responseText);c(a)}catch(e){}};
b.open("POST",a,!0);d&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(d?D(d,!1):"")}function D(a,c){var b=[],d;for(d in a)if(a.hasOwnProperty(d)){var f=c?c+"["+d+"]":d,e=a[d];b.push(null!==e&&"object"===typeof e?D(e,f):encodeURIComponent(f)+"="+encodeURIComponent(e))}return b.join("&")}var u="",l=0,w="https://api.zadarma.com/calltracker/",x="zphone",t=!0,v=!1,q=!1,z=!1,B=!1,g=!1;(function(){if(!a||!a.id)return!1;zTracker.url&&(w=zTracker.url);l=a.id.substr(32)||0;a.id=
a.id.substr(0,32);a.cssClass&&(x=a.cssClass);a.domain&&(a.domain.indexOf(",")?a.domain.split(",").forEach(function(a){return!y(a)}):y(a.domain));["click","touchend","keyup"].forEach(function(a){window.addEventListener(a,function(){t=!0})});var b=f()||{};b=b[l]?b[l]:{};var c={url:window.location.href,referer:document.referrer,cookie:b.ct?b.ct:"",id:a.id,active:t,roistat:f("roistat_visit")};b.phone&&(q=b.mask,g={phone:b.phone,cLength:b.cLength});c.roistat||delete c.roistat;document.addEventListener("DOMContentLoaded",
function(){p(c)});"loading"!=document.readyState&&p(c)}).call(this)},"object"===typeof _zCtOptions&&new window.zTracker(_zCtOptions));zTracker.formatPhone=function(a,c,f){if(c){var n=c,p=c.indexOf("%"),m=0;0<=p&&(f=f||1,c=c.substr(0,p)+a.substr(0,f)+c.substr(p+1),m+=f);for(;m<a.length&&(c=c.replace("X",a[m]),n!=c);m++)n=c;m!=a.length&&(c+=a.substr(m));c=c.replace(/X/g,"").replace(/.*?\|/,"");if(-1<c.indexOf("~"))for(a=c.split("~"),c="",f=0;f<a.length;f++)c+='<span class="zphone-part-'+(f+1)+'">'+
a[f]+"</span>";return c}return f?'<span class="zphone-country">+'+a.substr(0,f)+'</span><span class="zphone-region"> ('+a.substr(f,3)+') </span><span class="zphone-number">'+a.substr(f+3,3)+"-"+a.substr(f+6,2)+"-"+a.substr(f+8)+"</span>":'<span class="zphone-number">'+a+"</span>"};document.currentScript&&document.currentScript.hasAttribute("data-url")&&(zTracker.url=document.currentScript.getAttribute("data-url"));"loading"!=document.readyState?n():document.addEventListener("DOMContentLoaded",function(){n()})})();
